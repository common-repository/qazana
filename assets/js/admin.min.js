/*! qazana - v1.3.0 - 18-03-2018 */
!function e(t,a,n){function i(s,c){if(!a[s]){if(!t[s]){var r="function"==typeof require&&require;if(!c&&r)return r(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[s]={exports:{}};t[s][0].call(d.exports,function(e){var a=t[s][1][e];return i(a||e)},d,d.exports,e,t,a,n)}return a[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,a){!function(t){"use strict";var a={maintenanceMode:null,cacheElements:function(){this.cache={$window:t(window),$body:t("body"),$switchMode:t("#qazana-switch-mode"),$goToEditLink:t("#qazana-go-to-edit-page-link"),$switchModeInput:t("#qazana-switch-mode-input"),$switchModeButton:t("#qazana-switch-mode-button"),$qazanaLoader:t(".qazana-loader"),$builderEditor:t("#qazana-editor"),$importButton:t("#qazana-import-template-trigger"),$importArea:t("#qazana-import-template-area"),$settingsForm:t("#qazana-settings-form"),$settingsTabsWrapper:t("#qazana-settings-tabs-wrapper")},this.cache.$settingsFormPages=this.cache.$settingsForm.find(".qazana-settings-form-page"),this.cache.$activeSettingsPage=this.cache.$settingsFormPages.filter(".qazana-active"),this.cache.$settingsTabs=this.cache.$settingsTabsWrapper.children(),this.cache.$activeSettingsTab=this.cache.$settingsTabs.filter(".nav-tab-active")},toggleStatus:function(){var e=this.isQazanaMode();this.cache.$body.toggleClass("qazana-editor-active",e).toggleClass("qazana-editor-inactive",!e)},bindEvents:function(){var e=this;e.cache.$switchModeButton.on("click",function(a){if(a.preventDefault(),e.isQazanaMode())e.cache.$switchModeInput.val("");else{e.cache.$switchModeInput.val(!0);var n=t("#title");n.val()||n.val("Qazana #"+t("#post_ID").val()),wp.autosave&&wp.autosave.server.triggerSave(),e.animateLoader(),t(document).on("heartbeat-tick.autosave",function(){e.cache.$window.off("beforeunload.edit-post"),window.location=e.cache.$goToEditLink.attr("href")})}e.toggleStatus()}),e.cache.$goToEditLink.on("click",function(){e.animateLoader()}),t("div.notice.qazana-message-dismissed").on("click","button.notice-dismiss",function(e){e.preventDefault(),t.post(ajaxurl,{action:"qazana_set_admin_notice_viewed",notice_id:t(this).closest(".qazana-message-dismissed").data("notice_id")})}),t("#qazana-clear-cache-button").on("click",function(e){e.preventDefault();var a=t(this);a.removeClass("success").addClass("loading"),t.post(ajaxurl,{action:"qazana_clear_cache",_nonce:a.data("nonce")}).done(function(){a.removeClass("loading").addClass("success")})}),t("#qazana-library-sync-button").on("click",function(e){e.preventDefault();var a=t(this);a.removeClass("success").addClass("loading"),t.post(ajaxurl,{action:"qazana_reset_library",_nonce:a.data("nonce")}).done(function(){a.removeClass("loading").addClass("success")})}),t("#qazana-replace-url-button").on("click",function(e){e.preventDefault();var a=t(this),n=a.parents("tr"),i=n.find('[name="from"]'),o=n.find('[name="to"]');a.removeClass("success").addClass("loading"),t.post(ajaxurl,{action:"qazana_replace_url",from:i.val(),to:o.val(),_nonce:a.data("nonce")}).done(function(e){a.removeClass("loading"),e.success&&a.addClass("success"),(new DialogsManager.Instance).createWidget("alert",{message:e.data}).show()})}),e.cache.$settingsTabs.on({click:function(e){e.preventDefault(),e.currentTarget.focus()},focus:function(){var t=location.href.replace(/#.*/,"");history.pushState({},"",t+this.hash),e.goToSettingsTabFromHash()}}),t(".qazana-rollback-button").on("click",function(e){e.preventDefault();var a=t(this);(new DialogsManager.Instance).createWidget("confirm",{headerMessage:QazanaAdminConfig.i18n.rollback_to_previous_version,message:QazanaAdminConfig.i18n.rollback_confirm,strings:{confirm:QazanaAdminConfig.i18n.yes,cancel:QazanaAdminConfig.i18n.cancel},onConfirm:function(){a.addClass("loading"),location.href=a.attr("href")}}).show()}),t(".qazana_css_print_method select").on("change",function(){var e=t(".qazana-css-print-method-description");e.hide(),e.filter('[data-value="'+t(this).val()+'"]').show()}).trigger("change")},init:function(){this.cacheElements(),this.bindEvents(),this.initTemplatesImport(),this.initMaintenanceMode(),this.goToSettingsTabFromHash()},initTemplatesImport:function(){if(this.cache.$body.hasClass("post-type-qazana_library")){var e=this,a=e.cache.$importButton,n=e.cache.$importArea;e.cache.$formAnchor=t("h1"),t("#wpbody-content").find(".page-title-action:last").after(a),e.cache.$formAnchor.after(n),a.on("click",function(){t("#qazana-import-template-area").toggle()})}},initMaintenanceMode:function(){var t=e("./maintenance-mode");this.maintenanceMode=new t},isQazanaMode:function(){return!!this.cache.$switchModeInput.val()},animateLoader:function(){this.cache.$goToEditLink.addClass("qazana-animate")},goToSettingsTabFromHash:function(){var e=location.hash.slice(1);e&&this.goToSettingsTab(e)},goToSettingsTab:function(e){var t=this.cache.$settingsFormPages.filter("#"+e);if(t.length){this.cache.$activeSettingsPage.removeClass("qazana-active"),this.cache.$activeSettingsTab.removeClass("nav-tab-active");var a=this.cache.$settingsTabs.filter("#qazana-settings-"+e);t.addClass("qazana-active"),a.addClass("nav-tab-active"),this.cache.$settingsForm.attr("action","options.php#"+e),this.cache.$activeSettingsPage=t,this.cache.$activeSettingsTab=a}}};t(function(){a.init()}),window.qazanaAdmin=a}(jQuery)},{"./maintenance-mode":2}],2:[function(e,t,a){var n;n=e("qazana-utils/view-module").extend({getDefaultSettings:function(){return{selectors:{modeSelect:".qazana_maintenance_mode_mode select",maintenanceModeTable:"#tab-maintenance_mode table",maintenanceModeDescriptions:".qazana-maintenance-mode-description",excludeModeSelect:".qazana_maintenance_mode_exclude_mode select",excludeRolesArea:".qazana_maintenance_mode_exclude_roles",templateSelect:".qazana_maintenance_mode_template_id select",editTemplateButton:".qazana-edit-template",maintenanceModeError:".qazana-maintenance-mode-error"},classes:{isEnabled:"qazana-maintenance-mode-is-enabled"}}},getDefaultElements:function(){var e={},t=this.getSettings("selectors");return e.$modeSelect=jQuery(t.modeSelect),e.$maintenanceModeTable=e.$modeSelect.parents(t.maintenanceModeTable),e.$excludeModeSelect=e.$maintenanceModeTable.find(t.excludeModeSelect),e.$excludeRolesArea=e.$maintenanceModeTable.find(t.excludeRolesArea),e.$templateSelect=e.$maintenanceModeTable.find(t.templateSelect),e.$editTemplateButton=e.$maintenanceModeTable.find(t.editTemplateButton),e.$maintenanceModeDescriptions=e.$maintenanceModeTable.find(t.maintenanceModeDescriptions),e.$maintenanceModeError=e.$maintenanceModeTable.find(t.maintenanceModeError),e},bindEvents:function(){var e=this.getSettings(),t=this.elements;t.$modeSelect.on("change",function(){t.$maintenanceModeTable.toggleClass(e.classes.isEnabled,!!t.$modeSelect.val()),t.$maintenanceModeDescriptions.hide(),t.$maintenanceModeDescriptions.filter('[data-value="'+t.$modeSelect.val()+'"]').show()}).trigger("change"),t.$excludeModeSelect.on("change",function(){t.$excludeRolesArea.toggle("custom"===t.$excludeModeSelect.val())}).trigger("change"),t.$templateSelect.on("change",function(){var e=t.$templateSelect.val();if(!e)return t.$editTemplateButton.hide(),void t.$maintenanceModeError.show();var a=QazanaAdminConfig.home_url+"?p="+e+"&qazana";t.$editTemplateButton.prop("href",a).show(),t.$maintenanceModeError.hide()}).trigger("change")}}),t.exports=n},{"qazana-utils/view-module":4}],3:[function(e,t,a){var n=function(){var e,t=jQuery,a=arguments,n=this,i={},o=function(){t.each(n,function(e){var t=n[e];"function"==typeof t&&(n[e]=function(){return t.apply(n,arguments)})})},s=function(){e=n.getDefaultSettings();var i=a[0];i&&t.extend(e,i)};this.getItems=function(e,t){if(t){var a=t.split("."),n=a.splice(0,1);if(!a.length)return e[n];if(!e[n])return;return this.getItems(e[n],a.join("."))}return e},this.getSettings=function(t){return this.getItems(e,t)},this.setSettings=function(a,i,o){if(o||(o=e),"object"==typeof a)return t.extend(o,a),n;var s=a.split("."),c=s.splice(0,1);return s.length?(o[c]||(o[c]={}),n.setSettings(s.join("."),i,o[c])):(o[c]=i,n)},this.forceMethodImplementation=function(e){var t=e.callee.name;throw new ReferenceError("The method "+t+" must to be implemented in the inheritor child.")},this.on=function(e,t){return i[e]||(i[e]=[]),i[e].push(t),n},this.off=function(e,t){if(!i[e])return n;if(!t)return delete i[e],n;var a=i[e].indexOf(t);return-1!==a&&delete i[e][a],n},this.trigger=function(e){var a="on"+e[0].toUpperCase()+e.slice(1),o=Array.prototype.slice.call(arguments,1);n[a]&&n[a].apply(n,o);var s=i[e];s&&t.each(s,function(e,t){t.apply(n,o)})},this.getDeviceName=function(){return jQuery("body").hasClass("mobile")?"mobile":jQuery("body").hasClass("tablet")?"tablet":""},n.__construct.apply(n,a),o(),s(),n.trigger("init")};n.prototype.__construct=function(){},n.prototype.getDefaultSettings=function(){return{}},n.extendsCount=0,n.extend=function(e){var t=jQuery,a=this,i=function(){return a.apply(this,arguments)};t.extend(i,a),(i.prototype=Object.create(t.extend({},a.prototype,e))).constructor=i;var o=++n.extendsCount;return i.prototype.getConstructorID=function(){return o},i.__super__=a.prototype,i},t.exports=n},{}],4:[function(e,t,a){var n;n=e("qazana-utils/module").extend({elements:null,getDefaultElements:function(){return{}},bindEvents:function(){},onInit:function(){this.initElements(),this.bindEvents()},initElements:function(){this.elements=this.getDefaultElements()}}),t.exports=n},{"qazana-utils/module":3}]},{},[1]);